{"ast":null,"code":"var _jsxFileName = \"/Users/rafalskrzydelski/development/django/wealth_frontend/src/app/auth/components/Login/LoginUser.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as api from '../../../../api/api';\nimport { loginUrl } from '../../../../api/routes';\nimport { Container, TitleHeader } from '../styles';\nimport LoginForm from './LoginForm';\n\nclass LoginUser extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getFormData = credentials => {\n      console.log(credentials);\n      this.authenticateMe(credentials);\n    };\n\n    this.authenticateMe = this.authenticateMe.bind(this);\n  }\n\n  async authenticateMe(credit) {\n    const onAppAuthChangeInfo = this.props.onAppAuthChangeInfo;\n    const user = await api.post(loginUrl(), credit);\n\n    if (user.key !== undefined) {\n      localStorage.setItem('token', user.key);\n      localStorage.setItem('username', credit.username);\n\n      if (onAppAuthChangeInfo !== undefined) {\n        onAppAuthChangeInfo();\n      }\n    } else {\n      localStorage.clear();\n    }\n  }\n\n  render() {\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }, React.createElement(TitleHeader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, \"Login\"), React.createElement(LoginForm, {\n      getFormData: this.getFormData,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  console.log('from mapStateToProps');\n  console.log(state);\n  const credentials = state.credentials;\n  return {\n    credit: credentials\n  };\n};\n\nexport default connect(mapStateToProps, {})(LoginUser);","map":{"version":3,"sources":["/Users/rafalskrzydelski/development/django/wealth_frontend/src/app/auth/components/Login/LoginUser.js"],"names":["React","Component","connect","api","loginUrl","Container","TitleHeader","LoginForm","LoginUser","constructor","props","getFormData","credentials","console","log","authenticateMe","bind","credit","onAppAuthChangeInfo","user","post","key","undefined","localStorage","setItem","username","clear","render","mapStateToProps","state"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AAEA,OAAO,KAAKC,GAAZ,MAAqB,qBAArB;AACA,SAASC,QAAT,QAAyB,wBAAzB;AAEA,SAASC,SAAT,EAAoBC,WAApB,QAAuC,WAAvC;AACA,OAAOC,SAAP,MAAsB,aAAtB;;AAEA,MAAMC,SAAN,SAAwBP,SAAxB,CAAkC;AAChCQ,EAAAA,WAAW,CAAEC,KAAF,EAAS;AAClB,UAAMA,KAAN;;AADkB,SAmBpBC,WAnBoB,GAmBLC,WAAD,IAAiB;AAC7BC,MAAAA,OAAO,CAACC,GAAR,CAAYF,WAAZ;AACA,WAAKG,cAAL,CAAoBH,WAApB;AACD,KAtBmB;;AAElB,SAAKG,cAAL,GAAsB,KAAKA,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAtB;AACD;;AAED,QAAMD,cAAN,CAAsBE,MAAtB,EAA8B;AAAA,UACpBC,mBADoB,GACI,KAAKR,KADT,CACpBQ,mBADoB;AAE5B,UAAMC,IAAI,GAAG,MAAMhB,GAAG,CAACiB,IAAJ,CAAShB,QAAQ,EAAjB,EAAqBa,MAArB,CAAnB;;AACA,QAAIE,IAAI,CAACE,GAAL,KAAaC,SAAjB,EAA4B;AAC1BC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BL,IAAI,CAACE,GAAnC;AACAE,MAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCP,MAAM,CAACQ,QAAxC;;AACA,UAAIP,mBAAmB,KAAKI,SAA5B,EAAuC;AACrCJ,QAAAA,mBAAmB;AACpB;AACF,KAND,MAMO;AACLK,MAAAA,YAAY,CAACG,KAAb;AACD;AACF;;AAODC,EAAAA,MAAM,GAAI;AACR,WACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAEE,oBAAC,SAAD;AAAW,MAAA,WAAW,EAAE,KAAKhB,WAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF;AAMD;;AAhC+B;;AAmClC,MAAMiB,eAAe,GAAGC,KAAK,IAAI;AAC/BhB,EAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYe,KAAZ;AAF+B,QAGvBjB,WAHuB,GAGPiB,KAHO,CAGvBjB,WAHuB;AAI/B,SAAO;AAAEK,IAAAA,MAAM,EAAEL;AAAV,GAAP;AACD,CALD;;AAOA,eAAeV,OAAO,CAAC0B,eAAD,EAAkB,EAAlB,CAAP,CAA6BpB,SAA7B,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport * as api from '../../../../api/api'\nimport { loginUrl } from '../../../../api/routes'\n\nimport { Container, TitleHeader } from '../styles'\nimport LoginForm from './LoginForm'\n\nclass LoginUser extends Component {\n  constructor (props) {\n    super(props)\n    this.authenticateMe = this.authenticateMe.bind(this)\n  }\n\n  async authenticateMe (credit) {\n    const { onAppAuthChangeInfo } = this.props\n    const user = await api.post(loginUrl(), credit)\n    if (user.key !== undefined) {\n      localStorage.setItem('token', user.key)\n      localStorage.setItem('username', credit.username)\n      if (onAppAuthChangeInfo !== undefined) {\n        onAppAuthChangeInfo()\n      }\n    } else {\n      localStorage.clear()\n    }\n  }\n\n  getFormData = (credentials) => {\n    console.log(credentials)\n    this.authenticateMe(credentials)\n  }\n\n  render () {\n    return (\n      <Container>\n        <TitleHeader>Login</TitleHeader>\n        <LoginForm getFormData={this.getFormData}/>\n      </Container>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  console.log('from mapStateToProps')\n  console.log(state)\n  const { credentials } = state\n  return { credit: credentials }\n}\n\nexport default connect(mapStateToProps, {})(LoginUser)\n"]},"metadata":{},"sourceType":"module"}